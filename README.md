# js-pinning-service-client


[![](https://img.shields.io/badge/made%20by-Protocol%20Labs-blue.svg?style=flat-square)](http://protocol.ai)
[![](https://img.shields.io/badge/project-IPFS-blue.svg?style=flat-square)](https://ipfs.io/)
[![](https://img.shields.io/badge/status-draft-yellow.svg?style=flat-square)](https://github.com/ipfs/specs/#understanding-the-meaning-of-the-spec-badges-and-their-lifecycle)

An IPFS Pinning Service HTTP Client

> This repo is contains a reference implementation of a client for the [IPFS Pinning Services API Spec](https://github.com/ipfs/pinning-services-api-spec)

## Lead Maintainer

[Yusef Napora](https://github.com/yusefnapora)

## Usage

```javascript
const PinningClient = require('js-ipfs-pinning-service-client')

const config = {
    name: 'pinata',
    endpoint: 'https://api.pinata.cloud/psa',
    accessToken: () => process.env['PINATA_JWT_TOKEN'] // or just use a token string directly instead of a function
}

const client = new PinningClient(config)


const {cid} = await ipfs.add(catPic)
const {addresses} = await ipfs.id()
const response = await client.add({
    cid: cid, 
    name: 'cat-pic.jpeg',
    meta: {
        fluffy: true,
    },
    
    // send our IPFS addresses so they'll try to dial us
    origins: addresses.map(a => a.toString())
})

// dial the "delegates" sent back in the response
const dials = []
for (const addr of response.delegates) {
    dials.push(ipfs.swarm.connect(addr))
}
await Promise.all(dials)
```

## Updating Pinning Service Spec

This library uses an autogenerated client produced from an OpenAPI spec, stored locally in [pinning-service.yaml](./pinning-service.yaml).
To update to a newer version of the spec, replace `pinning-service.yaml` with the new spec and run `npm run generate`.

## Contributing

Contributions are welcome! This repository is part of the IPFS project and therefore governed by our [contributing guidelines](https://github.com/ipfs/community/blob/master/CONTRIBUTING.md).

## License

[SPDX-License-Identifier: Apache-2.0 OR MIT](LICENSE.md)
